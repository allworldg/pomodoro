var ve=Object.defineProperty;var ke=(e,t,n)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var re=(e,t,n)=>(ke(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function H(){}function Se(e){return e()}function me(){return Object.create(null)}function V(e){e.forEach(Se)}function Ie(e){return typeof e=="function"}function Oe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ue(e){return Object.keys(e).length===0}function i(e,t){e.appendChild(t)}function Ae(e,t,n){e.insertBefore(t,n||null)}function le(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e){return document.createElement(e)}function U(e){return document.createTextNode(e)}function w(){return U(" ")}function C(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function E(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function je(e){return Array.from(e.childNodes)}function K(e,t){t=""+t,e.data!==t&&(e.data=t)}function M(e,t){e.value=t??""}function R(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ge(e,t,n){for(let r=0;r<e.options.length;r+=1){const o=e.options[r];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function xe(e){const t=e.querySelector(":checked");return t&&t.__value}let J;function G(e){J=e}function Fe(){if(!J)throw new Error("Function called outside component initialization");return J}function qe(e){Fe().$$.on_mount.push(e)}const k=[],ye=[];let j=[];const we=[],Be=Promise.resolve();let ue=!1;function Ge(){ue||(ue=!0,Be.then(Ce))}function Q(e){j.push(e)}const oe=new Set;let v=0;function Ce(){if(v!==0)return;const e=J;do{try{for(;v<k.length;){const t=k[v];v++,G(t),He(t.$$)}}catch(t){throw k.length=0,v=0,t}for(G(null),k.length=0,v=0;ye.length;)ye.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];oe.has(n)||(oe.add(n),n())}j.length=0}while(k.length);for(;we.length;)we.pop()();ue=!1,oe.clear(),G(e)}function He(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}function Je(e){const t=[],n=[];j.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),j=t}const D=new Set;let Ve;function Ee(e,t){e&&e.i&&(D.delete(e),e.i(t))}function We(e,t,n,r){if(e&&e.o){if(D.has(e))return;D.add(e),Ve.c.push(()=>{D.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ze(e){e&&e.c()}function Pe(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),Q(()=>{const s=e.$$.on_mount.map(Se).filter(Ie);e.$$.on_destroy?e.$$.on_destroy.push(...s):V(s),e.$$.on_mount=[]}),o.forEach(Q)}function Le(e,t){const n=e.$$;n.fragment!==null&&(Je(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ke(e,t){e.$$.dirty[0]===-1&&(k.push(e),Ge(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Me(e,t,n,r,o,s,u,h=[-1]){const a=J;G(e);const l=e.$$={fragment:null,ctx:[],props:s,update:H,not_equal:o,bound:me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:me(),dirty:h,skip_bound:!1,root:t.target||a.$$.root};u&&u(l.root);let _=!1;if(l.ctx=n?n(e,t.props||{},(d,p,...O)=>{const y=O.length?O[0]:p;return l.ctx&&o(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),_&&Ke(e,d)),p}):[],l.update(),_=!0,V(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const d=je(t.target);l.fragment&&l.fragment.l(d),d.forEach(le)}else l.fragment&&l.fragment.c();t.intro&&Ee(e.$$.fragment),Pe(e,t.target,t.anchor),Ce()}G(a)}class Re{constructor(){re(this,"$$");re(this,"$$set")}$destroy(){Le(this,1),this.$destroy=H}$on(t,n){if(!Ie(n))return H;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Ue(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const De="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(De);function Qe(e){let t,n,r,o,s,u,h,a,l;return{c(){t=f("main"),n=f("div"),r=U(e[0]),o=w(),s=f("div"),u=f("span"),h=U(e[2]),a=U(" : "),l=U(e[1])},m(_,d){Ae(_,t,d),i(t,n),i(n,r),i(t,o),i(t,s),i(s,u),i(u,h),i(u,a),i(u,l)},p(_,[d]){d&1&&K(r,_[0]),d&4&&K(h,_[2]),d&2&&K(l,_[1])},i:H,o:H,d(_){_&&le(t)}}}function Xe(e,t,n){let r,o,{minutes:s}=t,{seconds:u}=t,{runningTitle:h=""}=t;return e.$$set=a=>{"minutes"in a&&n(3,s=a.minutes),"seconds"in a&&n(4,u=a.seconds),"runningTitle"in a&&n(0,h=a.runningTitle)},e.$$.update=()=>{e.$$.dirty&8&&n(2,r=s>=10?s:"0"+s),e.$$.dirty&16&&n(1,o=u>=10?u:"0"+u)},[h,o,r,s,u]}class Ye extends Re{constructor(t){super(),Me(this,t,Xe,Qe,Oe,{minutes:3,seconds:4,runningTitle:0})}}function ie(e,t,n){return Ze(e)&&$e(e,t,n)}function Ze(e){return typeof e!="string"?!1:e.trim()!=""&&!isNaN(e)}function $e(e,t,n){return e=parseInt(e),e>=t&&e<=n}function Te(e){window.mainAPI.setCookie(e)}function be(e){window.mainAPI.notification(e)}async function Ne(){return await window.mainAPI.getCookie()}function se(e){window.mainAPI.sendIsStarted(e)}function et(e){let t,n,r,o,s,u,h,a,l,_,d,p,O,y,b,x,W,g,F,c,T,X,fe,S,Y,ce,A,Z,ae,I,$,de,P,L,q,pe,ee,he,te,B,ne,_e;return r=new Ye({props:{minutes:e[3],seconds:e[4],runningTitle:e[5]}}),{c(){t=f("main"),n=f("div"),ze(r.$$.fragment),o=w(),s=f("div"),u=f("table"),h=f("tbody"),a=f("tr"),l=f("button"),_=U(e[7]),d=w(),p=f("div"),p.textContent="当前第x个/总共y个",O=w(),y=f("tr"),b=f("div"),x=f("span"),x.textContent="番茄",W=w(),g=f("input"),F=f("span"),F.textContent="分钟;",c=w(),T=f("div"),X=f("span"),X.textContent="休息",fe=w(),S=f("input"),Y=f("span"),Y.textContent="分钟",ce=w(),A=f("div"),Z=f("span"),Z.textContent="循环",ae=w(),I=f("input"),$=f("span"),$.textContent="次",de=w(),P=f("tr"),L=f("select"),q=f("option"),pe=w(),ee=f("div"),ee.innerHTML='<a href="#">点击选择提示音</a>',he=w(),te=f("div"),te.innerHTML="<a>清除自定义音乐</a>",E(g,"type","text"),E(g,"min","0"),E(g,"max","10"),E(g,"placeholder","x"),R(b,"display","inline"),R(b,"flex","auto"),E(S,"type","text"),E(S,"placeholder","x"),R(T,"display","inline"),R(T,"flex","auto"),E(I,"type","text"),E(I,"placeholder","x"),R(A,"display","inline"),R(A,"flex","auto"),q.__value="",M(q,q.__value),e[6]===void 0&&Q(()=>e[14].call(L)),R(s,"display","flex")},m(m,N){Ae(m,t,N),i(t,n),Pe(r,n,null),i(t,o),i(t,s),i(s,u),i(u,h),i(h,a),i(a,l),i(l,_),i(a,d),i(a,p),i(h,O),i(h,y),i(y,b),i(b,x),i(b,W),i(b,g),M(g,e[0]),i(b,F),i(y,c),i(y,T),i(T,X),i(T,fe),i(T,S),M(S,e[1]),i(T,Y),i(y,ce),i(y,A),i(A,Z),i(A,ae),i(A,I),M(I,e[2]),i(A,$),i(h,de),i(h,P),i(P,L),i(L,q),ge(L,e[6],!0),i(P,pe),i(P,ee),i(P,he),i(P,te),B=!0,ne||(_e=[C(l,"click",e[8]),C(g,"input",e[11]),C(g,"change",e[9]),C(S,"input",e[12]),C(S,"change",e[9]),C(I,"input",e[13]),C(I,"change",e[9]),C(L,"change",e[14])],ne=!0)},p(m,[N]){const z={};N&8&&(z.minutes=m[3]),N&16&&(z.seconds=m[4]),N&32&&(z.runningTitle=m[5]),r.$set(z),(!B||N&128)&&K(_,m[7]),N&1&&g.value!==m[0]&&M(g,m[0]),N&2&&S.value!==m[1]&&M(S,m[1]),N&4&&I.value!==m[2]&&M(I,m[2]),N&64&&ge(L,m[6])},i(m){B||(Ee(r.$$.fragment,m),B=!0)},o(m){We(r.$$.fragment,m),B=!1},d(m){m&&le(t),Le(r),ne=!1,V(_e)}}}const tt=0,nt=1,rt=2;function ot(e,t,n){let r,o="1",s="0",u="1",h=0,a=0,l=1,_,d="",p=new Audio;const O={TOMATO:1,REST:2};function y(){l==1?(n(10,l=0),se(l),_=new Worker(new URL(""+new URL("worker-28dd38e4.js",import.meta.url).href,self.location)),_.postMessage({tomatoes:o,rests:s,cycles:u,status:0}),_.onmessage=c=>{if(c.data.isPlayed!=null&&(c.data.isPlayed?(n(6,p=new Audio(new URL(""+new URL("forest-506f6ad2.mp4",import.meta.url).href,self.location))),n(6,p.onerror=function(){be("音乐文件播放失败，检查路径以及文件是否损坏。")},p),p.play()):(p.pause(),n(6,p.currentTime=0,p))),c.data.status==nt)n(10,l=1),se(l),n(3,h=0),n(4,a=0),_.terminate(),p.pause(),n(6,p.currentTime=0,p),n(5,d="");else if(c.data.status==tt){let T=c.data.remain_seconds;c.data.running_status==O.TOMATO?n(5,d="正在专注"):c.data.running_status==O.REST&&n(5,d="正在休息"),n(3,h=Math.floor(T/60)),n(4,a=Math.floor(T%60))}else c.data.status==rt&&be(c.data.notification.message)}):(n(10,l=1),se(l),_.terminate(),n(3,h=0),n(4,a=0),n(5,d=""),p.pause(),n(6,p.currentTime=0,p))}async function b(){if(!ie(o,1,240)||!ie(s,0,240)||!ie(u,1,100)){let c=await Ne();c.length==0?(n(0,o="1"),n(1,s="0"),n(2,u="1"),Te({tomatoes:o,rests:s,cycles:u,audio_paths:[],audio_path:""})):(c=JSON.parse(c[0].value),n(0,o=c.tomatoes),n(2,u=c.cycles),n(1,s=c.rests),c.audio_paths,c.audio_path)}else n(0,o=parseInt(o).toString()),n(1,s=parseInt(s).toString()),n(2,u=parseInt(u).toString()),Te({tomatoes:o,rests:s,cycles:u})}qe(async()=>{let c=await Ne();c=JSON.parse(c[0].value),n(0,o=c.tomatoes),n(1,s=c.rests),n(2,u=c.cycles)});function x(){o=this.value,n(0,o)}function W(){s=this.value,n(1,s)}function g(){u=this.value,n(2,u)}function F(){p=xe(this),n(6,p)}return e.$$.update=()=>{e.$$.dirty&1024&&n(7,r=l==1?"开始":"停止")},[o,s,u,h,a,d,p,r,y,b,l,x,W,g,F]}class it extends Re{constructor(t){super(),Me(this,t,ot,et,Oe,{})}}new it({target:document.body});
