var Be=Object.defineProperty;var Ge=(e,t,n)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>(Ge(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function X(){}function ve(e){return e()}function be(){return Object.create(null)}function Z(e){e.forEach(ve)}function Le(e){return typeof e=="function"}function Me(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function He(e){return Object.keys(e).length===0}function r(e,t){e.appendChild(t)}function oe(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode&&e.parentNode.removeChild(e)}function Je(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function a(e){return document.createElement(e)}function A(e){return document.createTextNode(e)}function I(){return A(" ")}function R(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function j(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ve(e){return Array.from(e.childNodes)}function B(e,t){t=""+t,e.data!==t&&(e.data=t)}function k(e,t){e.value=t??""}function q(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function Te(e,t,n){for(let o=0;o<e.options.length;o+=1){const i=e.options[o];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function We(e){const t=e.querySelector(":checked");return t&&t.__value}let Y;function Q(e){Y=e}function ze(){if(!Y)throw new Error("Function called outside component initialization");return Y}function Ke(e){ze().$$.on_mount.push(e)}const J=[],Ie=[];let V=[];const Ne=[],De=Promise.resolve();let pe=!1;function Qe(){pe||(pe=!0,De.then(Re))}function ne(e){V.push(e)}const ce=new Set;let H=0;function Re(){if(H!==0)return;const e=Y;do{try{for(;H<J.length;){const t=J[H];H++,Q(t),Xe(t.$$)}}catch(t){throw J.length=0,H=0,t}for(Q(null),J.length=0,H=0;Ie.length;)Ie.pop()();for(let t=0;t<V.length;t+=1){const n=V[t];ce.has(n)||(ce.add(n),n())}V.length=0}while(J.length);for(;Ne.length;)Ne.pop()();pe=!1,ce.clear(),Q(e)}function Xe(e){if(e.fragment!==null){e.update(),Z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function Ye(e){const t=[],n=[];V.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),V=t}const te=new Set;let Ze;function je(e,t){e&&e.i&&(te.delete(e),e.i(t))}function xe(e,t,n,o){if(e&&e.o){if(te.has(e))return;te.add(e),Ze.c.push(()=>{te.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function Se(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function $e(e){e&&e.c()}function ke(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),ne(()=>{const s=e.$$.on_mount.map(ve).filter(Le);e.$$.on_destroy?e.$$.on_destroy.push(...s):Z(s),e.$$.on_mount=[]}),i.forEach(ne)}function Ue(e,t){const n=e.$$;n.fragment!==null&&(Ye(n.after_update),Z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function et(e,t){e.$$.dirty[0]===-1&&(J.push(e),Qe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Fe(e,t,n,o,i,s,u,d=[-1]){const p=Y;Q(e);const l=e.$$={fragment:null,ctx:[],props:s,update:X,not_equal:i,bound:be(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:be(),dirty:d,skip_bound:!1,root:t.target||p.$$.root};u&&u(l.root);let m=!1;if(l.ctx=n?n(e,t.props||{},(_,N,...h)=>{const g=h.length?h[0]:N;return l.ctx&&i(l.ctx[_],l.ctx[_]=g)&&(!l.skip_bound&&l.bound[_]&&l.bound[_](g),m&&et(e,_)),N}):[],l.update(),m=!0,Z(l.before_update),l.fragment=o?o(l.ctx):!1,t.target){if(t.hydrate){const _=Ve(t.target);l.fragment&&l.fragment.l(_),_.forEach(x)}else l.fragment&&l.fragment.c();t.intro&&je(e.$$.fragment),ke(e,t.target,t.anchor),Re()}Q(p)}class qe{constructor(){fe(this,"$$");fe(this,"$$set")}$destroy(){Ue(this,1),this.$destroy=X}$on(t,n){if(!Le(n))return X;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!He(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(tt);function nt(e){let t,n,o,i,s,u,d,p,l;return{c(){t=a("main"),n=a("div"),o=A(e[0]),i=I(),s=a("div"),u=a("span"),d=A(e[2]),p=A(" : "),l=A(e[1])},m(m,_){oe(m,t,_),r(t,n),r(n,o),r(t,i),r(t,s),r(s,u),r(u,d),r(u,p),r(u,l)},p(m,[_]){_&1&&B(o,m[0]),_&4&&B(d,m[2]),_&2&&B(l,m[1])},i:X,o:X,d(m){m&&x(t)}}}function ot(e,t,n){let o,i,{minutes:s}=t,{seconds:u}=t,{runningTitle:d=""}=t;return e.$$set=p=>{"minutes"in p&&n(3,s=p.minutes),"seconds"in p&&n(4,u=p.seconds),"runningTitle"in p&&n(0,d=p.runningTitle)},e.$$.update=()=>{e.$$.dirty&8&&n(2,o=s>=10?s:"0"+s),e.$$.dirty&16&&n(1,i=u>=10?u:"0"+u)},[d,i,o,s,u]}class it extends qe{constructor(t){super(),Fe(this,t,ot,nt,Me,{minutes:3,seconds:4,runningTitle:0})}}function ae(e,t,n){return rt(e)&&st(e,t,n)}function rt(e){return typeof e!="string"?!1:e.trim()!=""&&!isNaN(e)}function st(e,t,n){return e=parseInt(e),e>=t&&e<=n}function ut(e){window.mainAPI.setCookie(e)}function Ae(e){window.mainAPI.notification(e)}async function Oe(){return await window.mainAPI.getCookie()}function de(e){window.mainAPI.sendIsStarted(e)}async function lt(){return await window.mainAPI.init()}function Ce(e,t,n){const o=e.slice();return o[11]=t[n],o}function Ee(e){let t,n,o,i,s,u,d;return{c(){t=a("tr"),n=a("div"),o=A("当前第"),i=A(e[4]),s=A("个/总共"),u=A(e[3]),d=A("个")},m(p,l){oe(p,t,l),r(t,n),r(n,o),r(n,i),r(n,s),r(n,u),r(n,d)},p(p,l){l&16&&B(i,p[4]),l&8&&B(u,p[3])},d(p){p&&x(t)}}}function Pe(e){let t,n=e[11].name+"",o,i,s;return{c(){t=a("option"),o=A(n),i=I(),t.__value=s=e[11].path,k(t,t.__value)},m(u,d){oe(u,t,d),r(t,o),r(t,i)},p(u,d){d&512&&n!==(n=u[11].name+"")&&B(o,n),d&512&&s!==(s=u[11].path)&&(t.__value=s,k(t,t.__value))},d(u){u&&x(t)}}}function ft(e){let t,n,o,i,s,u,d,p,l,m,_,N,h,g,C,W,b,z,$,E,K,ee,O,f,U,P,ie,he,v,re,me,F,L,_e,se,ge,ue,D,le,ye;o=new it({props:{minutes:e[5],seconds:e[6],runningTitle:e[7]}});let w=e[0]==0&&Ee(e),G=Se(e[9]),y=[];for(let c=0;c<G.length;c+=1)y[c]=Pe(Ce(e,G,c));return{c(){t=a("main"),n=a("div"),$e(o.$$.fragment),i=I(),s=a("div"),u=a("table"),d=a("tbody"),p=a("tr"),l=a("button"),m=A(e[10]),_=I(),w&&w.c(),N=I(),h=a("tr"),g=a("div"),C=a("span"),C.textContent="番茄",W=I(),b=a("input"),z=a("span"),z.textContent="分钟;",$=I(),E=a("div"),K=a("span"),K.textContent="休息",ee=I(),O=a("input"),f=a("span"),f.textContent="分钟",U=I(),P=a("div"),ie=a("span"),ie.textContent="循环",he=I(),v=a("input"),re=a("span"),re.textContent="次",me=I(),F=a("tr"),L=a("select");for(let c=0;c<y.length;c+=1)y[c].c();_e=I(),se=a("div"),se.innerHTML='<a href="javascript:void(0)">点击选择提示音</a>',ge=I(),ue=a("div"),ue.innerHTML="<button></button>",j(b,"type","text"),j(b,"min","0"),j(b,"max","10"),j(b,"placeholder","x"),q(g,"display","inline"),q(g,"flex","auto"),j(O,"type","text"),j(O,"placeholder","x"),q(E,"display","inline"),q(E,"flex","auto"),j(v,"type","text"),j(v,"placeholder","x"),q(P,"display","inline"),q(P,"flex","auto"),e[8].path===void 0&&ne(()=>e[17].call(L)),q(s,"display","flex")},m(c,T){oe(c,t,T),r(t,n),ke(o,n,null),r(t,i),r(t,s),r(s,u),r(u,d),r(d,p),r(p,l),r(l,m),r(d,_),w&&w.m(d,null),r(d,N),r(d,h),r(h,g),r(g,C),r(g,W),r(g,b),k(b,e[1]),r(g,z),r(h,$),r(h,E),r(E,K),r(E,ee),r(E,O),k(O,e[2]),r(E,f),r(h,U),r(h,P),r(P,ie),r(P,he),r(P,v),k(v,e[3]),r(P,re),r(d,me),r(d,F),r(F,L);for(let M=0;M<y.length;M+=1)y[M]&&y[M].m(L,null);Te(L,e[8].path,!0),r(F,_e),r(F,se),r(F,ge),r(F,ue),D=!0,le||(ye=[R(l,"click",e[12]),R(b,"input",e[14]),R(b,"change",e[13]),R(O,"input",e[15]),R(O,"change",e[13]),R(v,"input",e[16]),R(v,"change",e[13]),R(L,"change",e[17]),R(L,"change",e[18])],le=!0)},p(c,[T]){const M={};if(T&32&&(M.minutes=c[5]),T&64&&(M.seconds=c[6]),T&128&&(M.runningTitle=c[7]),o.$set(M),(!D||T&1024)&&B(m,c[10]),c[0]==0?w?w.p(c,T):(w=Ee(c),w.c(),w.m(d,N)):w&&(w.d(1),w=null),T&2&&b.value!==c[1]&&k(b,c[1]),T&4&&O.value!==c[2]&&k(O,c[2]),T&8&&v.value!==c[3]&&k(v,c[3]),T&512){G=Se(c[9]);let S;for(S=0;S<G.length;S+=1){const we=Ce(c,G,S);y[S]?y[S].p(we,T):(y[S]=Pe(we),y[S].c(),y[S].m(L,null))}for(;S<y.length;S+=1)y[S].d(1);y.length=G.length}T&768&&Te(L,c[8].path)},i(c){D||(je(o.$$.fragment,c),D=!0)},o(c){xe(o.$$.fragment,c),D=!1},d(c){c&&x(t),Ue(o),w&&w.d(),Je(y,c),le=!1,Z(ye)}}}const ct=0,at=1,dt=2;function pt(e,t,n){let o,i="1",s="0",u="1",d=1,p=0,l=0,m=1,_,N="",h=new Audio,g={},C=[];const W={TOMATO:1,REST:2};function b(){new Audio(g.path).play(),m==1?(n(0,m=0),de(m),_=new Worker(new URL(""+new URL("worker-e76c87c4.js",import.meta.url).href,self.location)),_.postMessage({tomatoes:i,rests:s,cycles:u,status:0}),_.onmessage=f=>{if(f.data.isPlayed!=null&&(f.data.isPlayed?g.path!=""&&(n(11,h=new Audio(new URL(""+new URL("forest-506f6ad2.mp4",import.meta.url).href,self.location))),n(11,h.onerror=function(){Ae("音乐文件播放失败，检查路径以及文件是否损坏。")},h),h.play()):h.played&&(h.pause(),n(11,h.currentTime=0,h))),f.data.status==at)n(0,m=1),de(m),n(5,p=0),n(6,l=0),_.terminate(),h.played&&h.pause(),n(11,h.currentTime=0,h),n(7,N="");else if(f.data.status==ct){let U=f.data.remain_seconds;f.data.running_status==W.TOMATO?n(7,N="正在专注"):f.data.running_status==W.REST&&n(7,N="正在休息"),n(5,p=Math.floor(U/60)),n(6,l=Math.floor(U%60)),n(4,d=f.data.curCycles)}else f.data.status==dt&&Ae(f.data.notification.message)}):(n(0,m=1),de(m),_.terminate(),n(5,p=0),n(6,l=0),n(7,N=""),h.played&&h.pause(),n(11,h.currentTime=0,h))}async function z(){if(!ae(i,1,240)||!ae(s,0,240)||!ae(u,1,100)){let f=await Oe();f.length==0&&(f=await lt()),f=JSON.parse(f[0].value),n(1,i=f.tomatoes),n(3,u=f.cycles),n(2,s=f.rests),n(9,C=f.audios),n(8,g=f.cur_audio)}else n(1,i=parseInt(i).toString()),n(2,s=parseInt(s).toString()),n(3,u=parseInt(u).toString()),ut({tomatoes:i,rests:s,cycles:u,audios:C,cur_audio:g})}Ke(async()=>{let f=await Oe();f=JSON.parse(f[0].value),n(1,i=f.tomatoes),n(2,s=f.rests),n(3,u=f.cycles),n(8,g=f.cur_audio),n(9,C=f.audios)});function $(){i=this.value,n(1,i)}function E(){s=this.value,n(2,s)}function K(){u=this.value,n(3,u)}function ee(){g.path=We(this),n(8,g),n(9,C)}const O=f=>{let U=f.target.value;n(8,g=C.find(P=>P.path==U))};return e.$$.update=()=>{e.$$.dirty&1&&n(10,o=m==1?"开始":"停止")},[m,i,s,u,d,p,l,N,g,C,o,h,b,z,$,E,K,ee,O]}class ht extends qe{constructor(t){super(),Fe(this,t,pt,ft,Me,{})}}new ht({target:document.body});
